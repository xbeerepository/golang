schema-version: 1.0


var:
  version: 1.17.2
  port: 2345
  app: /app
  user: default

port: "{% port %}"

provision:
  - pkg: git
  - url:
      from: https://golang.org/dl/go{% version %}.linux-amd64.tar.gz
      todir: /usr/local
  - systempath:
      paths:
        - /usr/local/go/bin
        - /root/go/bin
  - shell: go install github.com/go-delve/delve/cmd/dlv@latest

up:
  cmd: "{{ .templates }}/attach.sh"
  async: true


volumes:
  - app:{% app %}:.
directory: "{% app %}"
user: "{% user %}"


command:
  go: go {{ .args }}
  gofmt: gofmt {{ .args }}
